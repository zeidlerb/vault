### ***
### WARNING: DO NOT manually EDIT or MERGE this file, it is generated by 'make .circleci/config/@build-release.yml'.
### INSTEAD: Edit or merge the source in packages-oss.lock/pkgs.yml .circleci/config/@build-release.yml.tpl then run 'make .circleci/config/@build-release.yml'.
### ***
# Current cache version: cache001

executors:
  releaser:
    docker:
      - image: circleci/buildpack-deps
    environment:
      PRODUCT_REVISION: "591c89b0c14817023b0ea7a20c6d33eb26acd93f"
      AUTO_INSTALL_TOOLS: 'YES'
    shell: /usr/bin/env bash -euo pipefail -c

workflows:
  build-591c89b0c14817023b0ea7a20c6d33eb26acd93f-530d593613063dd9:
    jobs:
      - cache-builder-images:
          filters:
            branches:
              only:
                - /build-.*/
                - /ci.*/
      - darwin_386_package: { requires: [ cache-builder-images ] }
      - darwin_amd64_package: { requires: [ cache-builder-images ] }
      - freebsd_386_package: { requires: [ cache-builder-images ] }
      - freebsd_amd64_package: { requires: [ cache-builder-images ] }
      - freebsd_arm_package: { requires: [ cache-builder-images ] }
      - linux_386_package: { requires: [ cache-builder-images ] }
      - linux_amd64_package: { requires: [ cache-builder-images ] }
      - linux_arm_package: { requires: [ cache-builder-images ] }
      - linux_arm64_package: { requires: [ cache-builder-images ] }
      - netbsd_386_package: { requires: [ cache-builder-images ] }
      - netbsd_amd64_package: { requires: [ cache-builder-images ] }
      - openbsd_386_package: { requires: [ cache-builder-images ] }
      - openbsd_amd64_package: { requires: [ cache-builder-images ] }
      - solaris_amd64_package: { requires: [ cache-builder-images ] }
      - windows_386_package: { requires: [ cache-builder-images ] }
      - windows_amd64_package: { requires: [ cache-builder-images ] }
      - bundle-releases:
          requires:
            - darwin_386_package
            - darwin_amd64_package
            - freebsd_386_package
            - freebsd_amd64_package
            - freebsd_arm_package
            - linux_386_package
            - linux_amd64_package
            - linux_arm_package
            - linux_arm64_package
            - netbsd_386_package
            - netbsd_amd64_package
            - openbsd_386_package
            - openbsd_amd64_package
            - solaris_amd64_package
            - windows_386_package
            - windows_amd64_package
jobs:
  cache-builder-images:
    executor: releaser
    steps:
      - setup_remote_docker
      - checkout
      - write-build-layer-cache-keys

      # Load best available cached image.
      - restore_cache:
          keys:
            - cache001-build-static-assets_7c21_{{checksum ".buildcache/cache-keys/build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7"}}
            - cache001-build-ui_5fcd_{{checksum ".buildcache/cache-keys/build-ui-5fcd74915b08869b856272d3387411d1261f469e"}}
            - cache001-ui-dependencies_7c1e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c1e694ad5c5ec290f4b684b27b53e94b5e6508b"}}
            - cache001-install-yarn_985d_{{checksum ".buildcache/cache-keys/install-yarn-985d5d3f752a45cd0810fe7307419d816b3ffe09"}}
            - cache001-set-workdir_fe53_{{checksum ".buildcache/cache-keys/set-workdir-fe5358938453e5f6f63543c5ae1835424c7b8cbe"}}
            - cache001-install-go-tools_c2aa_{{checksum ".buildcache/cache-keys/install-go-tools-c2aad8477b1bc51dcb25518de1a7c6402dc3941f"}}
            - cache001-install-go_597a_{{checksum ".buildcache/cache-keys/install-go-597a1a15bf2e74b06883d2b2bb2e7239cb9b9c64"}}
            - cache001-base_1a0e_{{checksum ".buildcache/cache-keys/base-1a0eebdb7c8e017a66a042afd9f319a57d761a4c"}}
      - run:
          name: Finish early if loaded exact match from cache.
          command: |
            if [ -f .buildcache/archives/07-build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7.tar.gz ]; then
              echo "Exact match found in cache, skipping build."
              circleci-agent step halt
            else
              echo "No exact match found, proceeding with build."
            fi
      - run: LAYER_SPEC_ID=07-build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7 make -C packages*.lock load-builder-cache

      # No exact match was found, so build each layer up to target type.
      - run: make -f packages*.lock/layer.mk 00-base-1a0eebdb7c8e017a66a042afd9f319a57d761a4c-image
      - run: make -f packages*.lock/layer.mk 01-install-go-597a1a15bf2e74b06883d2b2bb2e7239cb9b9c64-image
      - run: make -f packages*.lock/layer.mk 02-install-go-tools-c2aad8477b1bc51dcb25518de1a7c6402dc3941f-image
      - run: make -f packages*.lock/layer.mk 03-set-workdir-fe5358938453e5f6f63543c5ae1835424c7b8cbe-image
      - run: make -f packages*.lock/layer.mk 04-install-yarn-985d5d3f752a45cd0810fe7307419d816b3ffe09-image
      - run: make -f packages*.lock/layer.mk 05-ui-dependencies-7c1e694ad5c5ec290f4b684b27b53e94b5e6508b-image
      - run: make -f packages*.lock/layer.mk 06-build-ui-5fcd74915b08869b856272d3387411d1261f469e-image
      - run: make -f packages*.lock/layer.mk 07-build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7-image

      # Save the target layer archive.
      
      - run: make -f packages*.lock/layer.mk 07-build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7-save
      
      # Store the target layer archive as all the relevant cache names.
      - save_cache:
          key: cache001-build-static-assets_7c21_{{checksum ".buildcache/cache-keys/build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7"}}
          paths:
            - .buildcache/archives/07-build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7.tar.gz
      - run: mv .buildcache/archives/07-build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7.tar.gz .buildcache/archives/06-build-ui-5fcd74915b08869b856272d3387411d1261f469e.tar.gz
      - save_cache:
          key: cache001-build-ui_5fcd_{{checksum ".buildcache/cache-keys/build-ui-5fcd74915b08869b856272d3387411d1261f469e"}}
          paths:
            - .buildcache/archives/06-build-ui-5fcd74915b08869b856272d3387411d1261f469e.tar.gz
      - run: mv .buildcache/archives/06-build-ui-5fcd74915b08869b856272d3387411d1261f469e.tar.gz .buildcache/archives/05-ui-dependencies-7c1e694ad5c5ec290f4b684b27b53e94b5e6508b.tar.gz
      - save_cache:
          key: cache001-ui-dependencies_7c1e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c1e694ad5c5ec290f4b684b27b53e94b5e6508b"}}
          paths:
            - .buildcache/archives/05-ui-dependencies-7c1e694ad5c5ec290f4b684b27b53e94b5e6508b.tar.gz
      - run: mv .buildcache/archives/05-ui-dependencies-7c1e694ad5c5ec290f4b684b27b53e94b5e6508b.tar.gz .buildcache/archives/04-install-yarn-985d5d3f752a45cd0810fe7307419d816b3ffe09.tar.gz
      - save_cache:
          key: cache001-install-yarn_985d_{{checksum ".buildcache/cache-keys/install-yarn-985d5d3f752a45cd0810fe7307419d816b3ffe09"}}
          paths:
            - .buildcache/archives/04-install-yarn-985d5d3f752a45cd0810fe7307419d816b3ffe09.tar.gz
      - run: mv .buildcache/archives/04-install-yarn-985d5d3f752a45cd0810fe7307419d816b3ffe09.tar.gz .buildcache/archives/03-set-workdir-fe5358938453e5f6f63543c5ae1835424c7b8cbe.tar.gz
      - save_cache:
          key: cache001-set-workdir_fe53_{{checksum ".buildcache/cache-keys/set-workdir-fe5358938453e5f6f63543c5ae1835424c7b8cbe"}}
          paths:
            - .buildcache/archives/03-set-workdir-fe5358938453e5f6f63543c5ae1835424c7b8cbe.tar.gz
      - run: mv .buildcache/archives/03-set-workdir-fe5358938453e5f6f63543c5ae1835424c7b8cbe.tar.gz .buildcache/archives/02-install-go-tools-c2aad8477b1bc51dcb25518de1a7c6402dc3941f.tar.gz
      - save_cache:
          key: cache001-install-go-tools_c2aa_{{checksum ".buildcache/cache-keys/install-go-tools-c2aad8477b1bc51dcb25518de1a7c6402dc3941f"}}
          paths:
            - .buildcache/archives/02-install-go-tools-c2aad8477b1bc51dcb25518de1a7c6402dc3941f.tar.gz
      - run: mv .buildcache/archives/02-install-go-tools-c2aad8477b1bc51dcb25518de1a7c6402dc3941f.tar.gz .buildcache/archives/01-install-go-597a1a15bf2e74b06883d2b2bb2e7239cb9b9c64.tar.gz
      - save_cache:
          key: cache001-install-go_597a_{{checksum ".buildcache/cache-keys/install-go-597a1a15bf2e74b06883d2b2bb2e7239cb9b9c64"}}
          paths:
            - .buildcache/archives/01-install-go-597a1a15bf2e74b06883d2b2bb2e7239cb9b9c64.tar.gz
      - run: mv .buildcache/archives/01-install-go-597a1a15bf2e74b06883d2b2bb2e7239cb9b9c64.tar.gz .buildcache/archives/00-base-1a0eebdb7c8e017a66a042afd9f319a57d761a4c.tar.gz
      - save_cache:
          key: cache001-base_1a0e_{{checksum ".buildcache/cache-keys/base-1a0eebdb7c8e017a66a042afd9f319a57d761a4c"}}
          paths:
            - .buildcache/archives/00-base-1a0eebdb7c8e017a66a042afd9f319a57d761a4c.tar.gz
  darwin_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 666cfaa5af6f8111905dbb2a2aa8ab8e83f0a9b3
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-666cfaa5af6f8111905dbb2a2aa8ab8e83f0a9b3-{{checksum ".buildcache/cache-keys/package-666cfaa5af6f8111905dbb2a2aa8ab8e83f0a9b3"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_2ac8_{{checksum ".buildcache/cache-keys/copy-source-2ac8dd0bfbcc0c10c7a29eade0e8cb87c16a09e9"}}
          - cache001-warm-go-build-vendor-cache_a4c6_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-a4c6b877aeccec7aaf8d528d1b239254acea0823"}}
          - cache001-build-static-assets_7c21_{{checksum ".buildcache/cache-keys/build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7"}}
          - cache001-build-ui_5fcd_{{checksum ".buildcache/cache-keys/build-ui-5fcd74915b08869b856272d3387411d1261f469e"}}
          - cache001-ui-dependencies_7c1e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c1e694ad5c5ec290f4b684b27b53e94b5e6508b"}}
          - cache001-install-yarn_985d_{{checksum ".buildcache/cache-keys/install-yarn-985d5d3f752a45cd0810fe7307419d816b3ffe09"}}
          - cache001-set-workdir_fe53_{{checksum ".buildcache/cache-keys/set-workdir-fe5358938453e5f6f63543c5ae1835424c7b8cbe"}}
          - cache001-install-go-tools_c2aa_{{checksum ".buildcache/cache-keys/install-go-tools-c2aad8477b1bc51dcb25518de1a7c6402dc3941f"}}
          - cache001-install-go_597a_{{checksum ".buildcache/cache-keys/install-go-597a1a15bf2e74b06883d2b2bb2e7239cb9b9c64"}}
          - cache001-base_1a0e_{{checksum ".buildcache/cache-keys/base-1a0eebdb7c8e017a66a042afd9f319a57d761a4c"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages/store
      # Save package cache.
      - save_cache:
          key: 'cache001-package-666cfaa5af6f8111905dbb2a2aa8ab8e83f0a9b3-{{checksum ".buildcache/cache-keys/package-666cfaa5af6f8111905dbb2a2aa8ab8e83f0a9b3"}}'
          paths:
            - .buildcache/packages/store
      - store_artifacts:
          path: .buildcache/packages/store
          destination: packages
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-a4c6b877aeccec7aaf8d528d1b239254acea0823.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-a4c6b877aeccec7aaf8d528d1b239254acea0823-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_a4c6_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-a4c6b877aeccec7aaf8d528d1b239254acea0823"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-a4c6b877aeccec7aaf8d528d1b239254acea0823.tar.gz

  darwin_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: af9337ac8507a5dd31b68df73ade7f31535dd6fd
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-af9337ac8507a5dd31b68df73ade7f31535dd6fd-{{checksum ".buildcache/cache-keys/package-af9337ac8507a5dd31b68df73ade7f31535dd6fd"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_948b_{{checksum ".buildcache/cache-keys/copy-source-948b79f05355cb5d1f37f231e53fc0723f2302a6"}}
          - cache001-warm-go-build-vendor-cache_3830_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-38306c8570075250506a515a20f34b5126c5837e"}}
          - cache001-build-static-assets_7c21_{{checksum ".buildcache/cache-keys/build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7"}}
          - cache001-build-ui_5fcd_{{checksum ".buildcache/cache-keys/build-ui-5fcd74915b08869b856272d3387411d1261f469e"}}
          - cache001-ui-dependencies_7c1e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c1e694ad5c5ec290f4b684b27b53e94b5e6508b"}}
          - cache001-install-yarn_985d_{{checksum ".buildcache/cache-keys/install-yarn-985d5d3f752a45cd0810fe7307419d816b3ffe09"}}
          - cache001-set-workdir_fe53_{{checksum ".buildcache/cache-keys/set-workdir-fe5358938453e5f6f63543c5ae1835424c7b8cbe"}}
          - cache001-install-go-tools_c2aa_{{checksum ".buildcache/cache-keys/install-go-tools-c2aad8477b1bc51dcb25518de1a7c6402dc3941f"}}
          - cache001-install-go_597a_{{checksum ".buildcache/cache-keys/install-go-597a1a15bf2e74b06883d2b2bb2e7239cb9b9c64"}}
          - cache001-base_1a0e_{{checksum ".buildcache/cache-keys/base-1a0eebdb7c8e017a66a042afd9f319a57d761a4c"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages/store
      # Save package cache.
      - save_cache:
          key: 'cache001-package-af9337ac8507a5dd31b68df73ade7f31535dd6fd-{{checksum ".buildcache/cache-keys/package-af9337ac8507a5dd31b68df73ade7f31535dd6fd"}}'
          paths:
            - .buildcache/packages/store
      - store_artifacts:
          path: .buildcache/packages/store
          destination: packages
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-38306c8570075250506a515a20f34b5126c5837e.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-38306c8570075250506a515a20f34b5126c5837e-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_3830_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-38306c8570075250506a515a20f34b5126c5837e"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-38306c8570075250506a515a20f34b5126c5837e.tar.gz

  freebsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 2814a6e0b0c0376db7998d1a3b77ebf034dc96df
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-2814a6e0b0c0376db7998d1a3b77ebf034dc96df-{{checksum ".buildcache/cache-keys/package-2814a6e0b0c0376db7998d1a3b77ebf034dc96df"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_5c2a_{{checksum ".buildcache/cache-keys/copy-source-5c2a10c6de9c3d4027e1095d18041257f4d7e943"}}
          - cache001-warm-go-build-vendor-cache_5729_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-5729c8912b854bf9b6cf8a0dc67e28bbd8ab681f"}}
          - cache001-build-static-assets_7c21_{{checksum ".buildcache/cache-keys/build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7"}}
          - cache001-build-ui_5fcd_{{checksum ".buildcache/cache-keys/build-ui-5fcd74915b08869b856272d3387411d1261f469e"}}
          - cache001-ui-dependencies_7c1e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c1e694ad5c5ec290f4b684b27b53e94b5e6508b"}}
          - cache001-install-yarn_985d_{{checksum ".buildcache/cache-keys/install-yarn-985d5d3f752a45cd0810fe7307419d816b3ffe09"}}
          - cache001-set-workdir_fe53_{{checksum ".buildcache/cache-keys/set-workdir-fe5358938453e5f6f63543c5ae1835424c7b8cbe"}}
          - cache001-install-go-tools_c2aa_{{checksum ".buildcache/cache-keys/install-go-tools-c2aad8477b1bc51dcb25518de1a7c6402dc3941f"}}
          - cache001-install-go_597a_{{checksum ".buildcache/cache-keys/install-go-597a1a15bf2e74b06883d2b2bb2e7239cb9b9c64"}}
          - cache001-base_1a0e_{{checksum ".buildcache/cache-keys/base-1a0eebdb7c8e017a66a042afd9f319a57d761a4c"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages/store
      # Save package cache.
      - save_cache:
          key: 'cache001-package-2814a6e0b0c0376db7998d1a3b77ebf034dc96df-{{checksum ".buildcache/cache-keys/package-2814a6e0b0c0376db7998d1a3b77ebf034dc96df"}}'
          paths:
            - .buildcache/packages/store
      - store_artifacts:
          path: .buildcache/packages/store
          destination: packages
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-5729c8912b854bf9b6cf8a0dc67e28bbd8ab681f.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-5729c8912b854bf9b6cf8a0dc67e28bbd8ab681f-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_5729_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-5729c8912b854bf9b6cf8a0dc67e28bbd8ab681f"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-5729c8912b854bf9b6cf8a0dc67e28bbd8ab681f.tar.gz

  freebsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: f164924c55c64aa97e0305a70657d9dd4e6b19ee
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-f164924c55c64aa97e0305a70657d9dd4e6b19ee-{{checksum ".buildcache/cache-keys/package-f164924c55c64aa97e0305a70657d9dd4e6b19ee"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_8e8e_{{checksum ".buildcache/cache-keys/copy-source-8e8e6a6afab100d225e1419642f61863b9e2bf8d"}}
          - cache001-warm-go-build-vendor-cache_fb9a_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-fb9a5ac9be401125f9141a649bff22b7f26a1e7b"}}
          - cache001-build-static-assets_7c21_{{checksum ".buildcache/cache-keys/build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7"}}
          - cache001-build-ui_5fcd_{{checksum ".buildcache/cache-keys/build-ui-5fcd74915b08869b856272d3387411d1261f469e"}}
          - cache001-ui-dependencies_7c1e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c1e694ad5c5ec290f4b684b27b53e94b5e6508b"}}
          - cache001-install-yarn_985d_{{checksum ".buildcache/cache-keys/install-yarn-985d5d3f752a45cd0810fe7307419d816b3ffe09"}}
          - cache001-set-workdir_fe53_{{checksum ".buildcache/cache-keys/set-workdir-fe5358938453e5f6f63543c5ae1835424c7b8cbe"}}
          - cache001-install-go-tools_c2aa_{{checksum ".buildcache/cache-keys/install-go-tools-c2aad8477b1bc51dcb25518de1a7c6402dc3941f"}}
          - cache001-install-go_597a_{{checksum ".buildcache/cache-keys/install-go-597a1a15bf2e74b06883d2b2bb2e7239cb9b9c64"}}
          - cache001-base_1a0e_{{checksum ".buildcache/cache-keys/base-1a0eebdb7c8e017a66a042afd9f319a57d761a4c"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages/store
      # Save package cache.
      - save_cache:
          key: 'cache001-package-f164924c55c64aa97e0305a70657d9dd4e6b19ee-{{checksum ".buildcache/cache-keys/package-f164924c55c64aa97e0305a70657d9dd4e6b19ee"}}'
          paths:
            - .buildcache/packages/store
      - store_artifacts:
          path: .buildcache/packages/store
          destination: packages
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-fb9a5ac9be401125f9141a649bff22b7f26a1e7b.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-fb9a5ac9be401125f9141a649bff22b7f26a1e7b-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_fb9a_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-fb9a5ac9be401125f9141a649bff22b7f26a1e7b"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-fb9a5ac9be401125f9141a649bff22b7f26a1e7b.tar.gz

  freebsd_arm_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: feecff2d5678aaed0e9cd1275063bff0172d95e6
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-feecff2d5678aaed0e9cd1275063bff0172d95e6-{{checksum ".buildcache/cache-keys/package-feecff2d5678aaed0e9cd1275063bff0172d95e6"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_50d1_{{checksum ".buildcache/cache-keys/copy-source-50d1989c99d94e85afe4ff7d66da7b743251cae4"}}
          - cache001-warm-go-build-vendor-cache_d32c_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-d32c38a5770d69785d6cf47bee9655bc466ec3f3"}}
          - cache001-build-static-assets_7c21_{{checksum ".buildcache/cache-keys/build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7"}}
          - cache001-build-ui_5fcd_{{checksum ".buildcache/cache-keys/build-ui-5fcd74915b08869b856272d3387411d1261f469e"}}
          - cache001-ui-dependencies_7c1e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c1e694ad5c5ec290f4b684b27b53e94b5e6508b"}}
          - cache001-install-yarn_985d_{{checksum ".buildcache/cache-keys/install-yarn-985d5d3f752a45cd0810fe7307419d816b3ffe09"}}
          - cache001-set-workdir_fe53_{{checksum ".buildcache/cache-keys/set-workdir-fe5358938453e5f6f63543c5ae1835424c7b8cbe"}}
          - cache001-install-go-tools_c2aa_{{checksum ".buildcache/cache-keys/install-go-tools-c2aad8477b1bc51dcb25518de1a7c6402dc3941f"}}
          - cache001-install-go_597a_{{checksum ".buildcache/cache-keys/install-go-597a1a15bf2e74b06883d2b2bb2e7239cb9b9c64"}}
          - cache001-base_1a0e_{{checksum ".buildcache/cache-keys/base-1a0eebdb7c8e017a66a042afd9f319a57d761a4c"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages/store
      # Save package cache.
      - save_cache:
          key: 'cache001-package-feecff2d5678aaed0e9cd1275063bff0172d95e6-{{checksum ".buildcache/cache-keys/package-feecff2d5678aaed0e9cd1275063bff0172d95e6"}}'
          paths:
            - .buildcache/packages/store
      - store_artifacts:
          path: .buildcache/packages/store
          destination: packages
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-d32c38a5770d69785d6cf47bee9655bc466ec3f3.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-d32c38a5770d69785d6cf47bee9655bc466ec3f3-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_d32c_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-d32c38a5770d69785d6cf47bee9655bc466ec3f3"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-d32c38a5770d69785d6cf47bee9655bc466ec3f3.tar.gz

  linux_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 5f916cc2cd8a6ec34f2b45ef9c5aac13d16d4b30
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-5f916cc2cd8a6ec34f2b45ef9c5aac13d16d4b30-{{checksum ".buildcache/cache-keys/package-5f916cc2cd8a6ec34f2b45ef9c5aac13d16d4b30"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_1b7d_{{checksum ".buildcache/cache-keys/copy-source-1b7df19ee44c9174b8be67aa6d81e24b04d12505"}}
          - cache001-warm-go-build-vendor-cache_be08_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-be081d5d75f0d4be93eae6ea865f6a89f2a6970e"}}
          - cache001-build-static-assets_7c21_{{checksum ".buildcache/cache-keys/build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7"}}
          - cache001-build-ui_5fcd_{{checksum ".buildcache/cache-keys/build-ui-5fcd74915b08869b856272d3387411d1261f469e"}}
          - cache001-ui-dependencies_7c1e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c1e694ad5c5ec290f4b684b27b53e94b5e6508b"}}
          - cache001-install-yarn_985d_{{checksum ".buildcache/cache-keys/install-yarn-985d5d3f752a45cd0810fe7307419d816b3ffe09"}}
          - cache001-set-workdir_fe53_{{checksum ".buildcache/cache-keys/set-workdir-fe5358938453e5f6f63543c5ae1835424c7b8cbe"}}
          - cache001-install-go-tools_c2aa_{{checksum ".buildcache/cache-keys/install-go-tools-c2aad8477b1bc51dcb25518de1a7c6402dc3941f"}}
          - cache001-install-go_597a_{{checksum ".buildcache/cache-keys/install-go-597a1a15bf2e74b06883d2b2bb2e7239cb9b9c64"}}
          - cache001-base_1a0e_{{checksum ".buildcache/cache-keys/base-1a0eebdb7c8e017a66a042afd9f319a57d761a4c"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages/store
      # Save package cache.
      - save_cache:
          key: 'cache001-package-5f916cc2cd8a6ec34f2b45ef9c5aac13d16d4b30-{{checksum ".buildcache/cache-keys/package-5f916cc2cd8a6ec34f2b45ef9c5aac13d16d4b30"}}'
          paths:
            - .buildcache/packages/store
      - store_artifacts:
          path: .buildcache/packages/store
          destination: packages
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-be081d5d75f0d4be93eae6ea865f6a89f2a6970e.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-be081d5d75f0d4be93eae6ea865f6a89f2a6970e-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_be08_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-be081d5d75f0d4be93eae6ea865f6a89f2a6970e"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-be081d5d75f0d4be93eae6ea865f6a89f2a6970e.tar.gz

  linux_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 303fe5b44af20f8c75d52251ee7875081085f0f8
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-303fe5b44af20f8c75d52251ee7875081085f0f8-{{checksum ".buildcache/cache-keys/package-303fe5b44af20f8c75d52251ee7875081085f0f8"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_83e2_{{checksum ".buildcache/cache-keys/copy-source-83e23bfb4502809b345f80221a5688c183d27308"}}
          - cache001-warm-go-build-vendor-cache_0ce8_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-0ce8e3ff723f31379bf6955716f58b70f3c5b48b"}}
          - cache001-build-static-assets_7c21_{{checksum ".buildcache/cache-keys/build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7"}}
          - cache001-build-ui_5fcd_{{checksum ".buildcache/cache-keys/build-ui-5fcd74915b08869b856272d3387411d1261f469e"}}
          - cache001-ui-dependencies_7c1e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c1e694ad5c5ec290f4b684b27b53e94b5e6508b"}}
          - cache001-install-yarn_985d_{{checksum ".buildcache/cache-keys/install-yarn-985d5d3f752a45cd0810fe7307419d816b3ffe09"}}
          - cache001-set-workdir_fe53_{{checksum ".buildcache/cache-keys/set-workdir-fe5358938453e5f6f63543c5ae1835424c7b8cbe"}}
          - cache001-install-go-tools_c2aa_{{checksum ".buildcache/cache-keys/install-go-tools-c2aad8477b1bc51dcb25518de1a7c6402dc3941f"}}
          - cache001-install-go_597a_{{checksum ".buildcache/cache-keys/install-go-597a1a15bf2e74b06883d2b2bb2e7239cb9b9c64"}}
          - cache001-base_1a0e_{{checksum ".buildcache/cache-keys/base-1a0eebdb7c8e017a66a042afd9f319a57d761a4c"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages/store
      # Save package cache.
      - save_cache:
          key: 'cache001-package-303fe5b44af20f8c75d52251ee7875081085f0f8-{{checksum ".buildcache/cache-keys/package-303fe5b44af20f8c75d52251ee7875081085f0f8"}}'
          paths:
            - .buildcache/packages/store
      - store_artifacts:
          path: .buildcache/packages/store
          destination: packages
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-0ce8e3ff723f31379bf6955716f58b70f3c5b48b.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-0ce8e3ff723f31379bf6955716f58b70f3c5b48b-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_0ce8_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-0ce8e3ff723f31379bf6955716f58b70f3c5b48b"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-0ce8e3ff723f31379bf6955716f58b70f3c5b48b.tar.gz

  linux_arm_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 6567d2eb2a0550c80192777fde580debcde9bf3c
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-6567d2eb2a0550c80192777fde580debcde9bf3c-{{checksum ".buildcache/cache-keys/package-6567d2eb2a0550c80192777fde580debcde9bf3c"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_370f_{{checksum ".buildcache/cache-keys/copy-source-370ff09d97490bcfbfbaf940fa08d3420a27d318"}}
          - cache001-warm-go-build-vendor-cache_c5b5_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-c5b5fe7db5d96e53eb07a75aa90a8cd1cfc8bd51"}}
          - cache001-build-static-assets_7c21_{{checksum ".buildcache/cache-keys/build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7"}}
          - cache001-build-ui_5fcd_{{checksum ".buildcache/cache-keys/build-ui-5fcd74915b08869b856272d3387411d1261f469e"}}
          - cache001-ui-dependencies_7c1e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c1e694ad5c5ec290f4b684b27b53e94b5e6508b"}}
          - cache001-install-yarn_985d_{{checksum ".buildcache/cache-keys/install-yarn-985d5d3f752a45cd0810fe7307419d816b3ffe09"}}
          - cache001-set-workdir_fe53_{{checksum ".buildcache/cache-keys/set-workdir-fe5358938453e5f6f63543c5ae1835424c7b8cbe"}}
          - cache001-install-go-tools_c2aa_{{checksum ".buildcache/cache-keys/install-go-tools-c2aad8477b1bc51dcb25518de1a7c6402dc3941f"}}
          - cache001-install-go_597a_{{checksum ".buildcache/cache-keys/install-go-597a1a15bf2e74b06883d2b2bb2e7239cb9b9c64"}}
          - cache001-base_1a0e_{{checksum ".buildcache/cache-keys/base-1a0eebdb7c8e017a66a042afd9f319a57d761a4c"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages/store
      # Save package cache.
      - save_cache:
          key: 'cache001-package-6567d2eb2a0550c80192777fde580debcde9bf3c-{{checksum ".buildcache/cache-keys/package-6567d2eb2a0550c80192777fde580debcde9bf3c"}}'
          paths:
            - .buildcache/packages/store
      - store_artifacts:
          path: .buildcache/packages/store
          destination: packages
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-c5b5fe7db5d96e53eb07a75aa90a8cd1cfc8bd51.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-c5b5fe7db5d96e53eb07a75aa90a8cd1cfc8bd51-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_c5b5_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-c5b5fe7db5d96e53eb07a75aa90a8cd1cfc8bd51"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-c5b5fe7db5d96e53eb07a75aa90a8cd1cfc8bd51.tar.gz

  linux_arm64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 033d31ff6def120af617cda24f017e66a5857e1b
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-033d31ff6def120af617cda24f017e66a5857e1b-{{checksum ".buildcache/cache-keys/package-033d31ff6def120af617cda24f017e66a5857e1b"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_db18_{{checksum ".buildcache/cache-keys/copy-source-db180a8ffb9c282015c63ad2827159ceeb27060c"}}
          - cache001-warm-go-build-vendor-cache_3d53_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-3d53a16a300d170d26c5ae1a1310cc5c40198b67"}}
          - cache001-build-static-assets_7c21_{{checksum ".buildcache/cache-keys/build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7"}}
          - cache001-build-ui_5fcd_{{checksum ".buildcache/cache-keys/build-ui-5fcd74915b08869b856272d3387411d1261f469e"}}
          - cache001-ui-dependencies_7c1e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c1e694ad5c5ec290f4b684b27b53e94b5e6508b"}}
          - cache001-install-yarn_985d_{{checksum ".buildcache/cache-keys/install-yarn-985d5d3f752a45cd0810fe7307419d816b3ffe09"}}
          - cache001-set-workdir_fe53_{{checksum ".buildcache/cache-keys/set-workdir-fe5358938453e5f6f63543c5ae1835424c7b8cbe"}}
          - cache001-install-go-tools_c2aa_{{checksum ".buildcache/cache-keys/install-go-tools-c2aad8477b1bc51dcb25518de1a7c6402dc3941f"}}
          - cache001-install-go_597a_{{checksum ".buildcache/cache-keys/install-go-597a1a15bf2e74b06883d2b2bb2e7239cb9b9c64"}}
          - cache001-base_1a0e_{{checksum ".buildcache/cache-keys/base-1a0eebdb7c8e017a66a042afd9f319a57d761a4c"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages/store
      # Save package cache.
      - save_cache:
          key: 'cache001-package-033d31ff6def120af617cda24f017e66a5857e1b-{{checksum ".buildcache/cache-keys/package-033d31ff6def120af617cda24f017e66a5857e1b"}}'
          paths:
            - .buildcache/packages/store
      - store_artifacts:
          path: .buildcache/packages/store
          destination: packages
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-3d53a16a300d170d26c5ae1a1310cc5c40198b67.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-3d53a16a300d170d26c5ae1a1310cc5c40198b67-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_3d53_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-3d53a16a300d170d26c5ae1a1310cc5c40198b67"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-3d53a16a300d170d26c5ae1a1310cc5c40198b67.tar.gz

  netbsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 47ef16a326ba5942bd65d17f5ff83bf7adbc414d
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-47ef16a326ba5942bd65d17f5ff83bf7adbc414d-{{checksum ".buildcache/cache-keys/package-47ef16a326ba5942bd65d17f5ff83bf7adbc414d"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_1ba9_{{checksum ".buildcache/cache-keys/copy-source-1ba948d5850c8c18cba53445b2d7f179bbb43e1d"}}
          - cache001-warm-go-build-vendor-cache_385c_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-385c32eb530f9ccbd253f305f1e448ecc20f30e8"}}
          - cache001-build-static-assets_7c21_{{checksum ".buildcache/cache-keys/build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7"}}
          - cache001-build-ui_5fcd_{{checksum ".buildcache/cache-keys/build-ui-5fcd74915b08869b856272d3387411d1261f469e"}}
          - cache001-ui-dependencies_7c1e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c1e694ad5c5ec290f4b684b27b53e94b5e6508b"}}
          - cache001-install-yarn_985d_{{checksum ".buildcache/cache-keys/install-yarn-985d5d3f752a45cd0810fe7307419d816b3ffe09"}}
          - cache001-set-workdir_fe53_{{checksum ".buildcache/cache-keys/set-workdir-fe5358938453e5f6f63543c5ae1835424c7b8cbe"}}
          - cache001-install-go-tools_c2aa_{{checksum ".buildcache/cache-keys/install-go-tools-c2aad8477b1bc51dcb25518de1a7c6402dc3941f"}}
          - cache001-install-go_597a_{{checksum ".buildcache/cache-keys/install-go-597a1a15bf2e74b06883d2b2bb2e7239cb9b9c64"}}
          - cache001-base_1a0e_{{checksum ".buildcache/cache-keys/base-1a0eebdb7c8e017a66a042afd9f319a57d761a4c"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages/store
      # Save package cache.
      - save_cache:
          key: 'cache001-package-47ef16a326ba5942bd65d17f5ff83bf7adbc414d-{{checksum ".buildcache/cache-keys/package-47ef16a326ba5942bd65d17f5ff83bf7adbc414d"}}'
          paths:
            - .buildcache/packages/store
      - store_artifacts:
          path: .buildcache/packages/store
          destination: packages
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-385c32eb530f9ccbd253f305f1e448ecc20f30e8.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-385c32eb530f9ccbd253f305f1e448ecc20f30e8-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_385c_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-385c32eb530f9ccbd253f305f1e448ecc20f30e8"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-385c32eb530f9ccbd253f305f1e448ecc20f30e8.tar.gz

  netbsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 4af6733e6eb626d86509d11b4dc48c2b4c299b1a
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-4af6733e6eb626d86509d11b4dc48c2b4c299b1a-{{checksum ".buildcache/cache-keys/package-4af6733e6eb626d86509d11b4dc48c2b4c299b1a"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_d910_{{checksum ".buildcache/cache-keys/copy-source-d910cc37ecf25331c53bb5ab27a817d63c36369f"}}
          - cache001-warm-go-build-vendor-cache_9bae_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-9bae6e7b584977ea7b1c927c05063f921eb6b859"}}
          - cache001-build-static-assets_7c21_{{checksum ".buildcache/cache-keys/build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7"}}
          - cache001-build-ui_5fcd_{{checksum ".buildcache/cache-keys/build-ui-5fcd74915b08869b856272d3387411d1261f469e"}}
          - cache001-ui-dependencies_7c1e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c1e694ad5c5ec290f4b684b27b53e94b5e6508b"}}
          - cache001-install-yarn_985d_{{checksum ".buildcache/cache-keys/install-yarn-985d5d3f752a45cd0810fe7307419d816b3ffe09"}}
          - cache001-set-workdir_fe53_{{checksum ".buildcache/cache-keys/set-workdir-fe5358938453e5f6f63543c5ae1835424c7b8cbe"}}
          - cache001-install-go-tools_c2aa_{{checksum ".buildcache/cache-keys/install-go-tools-c2aad8477b1bc51dcb25518de1a7c6402dc3941f"}}
          - cache001-install-go_597a_{{checksum ".buildcache/cache-keys/install-go-597a1a15bf2e74b06883d2b2bb2e7239cb9b9c64"}}
          - cache001-base_1a0e_{{checksum ".buildcache/cache-keys/base-1a0eebdb7c8e017a66a042afd9f319a57d761a4c"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages/store
      # Save package cache.
      - save_cache:
          key: 'cache001-package-4af6733e6eb626d86509d11b4dc48c2b4c299b1a-{{checksum ".buildcache/cache-keys/package-4af6733e6eb626d86509d11b4dc48c2b4c299b1a"}}'
          paths:
            - .buildcache/packages/store
      - store_artifacts:
          path: .buildcache/packages/store
          destination: packages
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-9bae6e7b584977ea7b1c927c05063f921eb6b859.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-9bae6e7b584977ea7b1c927c05063f921eb6b859-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_9bae_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-9bae6e7b584977ea7b1c927c05063f921eb6b859"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-9bae6e7b584977ea7b1c927c05063f921eb6b859.tar.gz

  openbsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: b919e6c18167320217b120217f6de43610e24af9
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-b919e6c18167320217b120217f6de43610e24af9-{{checksum ".buildcache/cache-keys/package-b919e6c18167320217b120217f6de43610e24af9"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_ac78_{{checksum ".buildcache/cache-keys/copy-source-ac78ccbf882bd5093c1f11080b6c86824c94d9d5"}}
          - cache001-warm-go-build-vendor-cache_26d1_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-26d1b9d805b71c8fdcb315e9903862d0cbfec92e"}}
          - cache001-build-static-assets_7c21_{{checksum ".buildcache/cache-keys/build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7"}}
          - cache001-build-ui_5fcd_{{checksum ".buildcache/cache-keys/build-ui-5fcd74915b08869b856272d3387411d1261f469e"}}
          - cache001-ui-dependencies_7c1e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c1e694ad5c5ec290f4b684b27b53e94b5e6508b"}}
          - cache001-install-yarn_985d_{{checksum ".buildcache/cache-keys/install-yarn-985d5d3f752a45cd0810fe7307419d816b3ffe09"}}
          - cache001-set-workdir_fe53_{{checksum ".buildcache/cache-keys/set-workdir-fe5358938453e5f6f63543c5ae1835424c7b8cbe"}}
          - cache001-install-go-tools_c2aa_{{checksum ".buildcache/cache-keys/install-go-tools-c2aad8477b1bc51dcb25518de1a7c6402dc3941f"}}
          - cache001-install-go_597a_{{checksum ".buildcache/cache-keys/install-go-597a1a15bf2e74b06883d2b2bb2e7239cb9b9c64"}}
          - cache001-base_1a0e_{{checksum ".buildcache/cache-keys/base-1a0eebdb7c8e017a66a042afd9f319a57d761a4c"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages/store
      # Save package cache.
      - save_cache:
          key: 'cache001-package-b919e6c18167320217b120217f6de43610e24af9-{{checksum ".buildcache/cache-keys/package-b919e6c18167320217b120217f6de43610e24af9"}}'
          paths:
            - .buildcache/packages/store
      - store_artifacts:
          path: .buildcache/packages/store
          destination: packages
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-26d1b9d805b71c8fdcb315e9903862d0cbfec92e.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-26d1b9d805b71c8fdcb315e9903862d0cbfec92e-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_26d1_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-26d1b9d805b71c8fdcb315e9903862d0cbfec92e"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-26d1b9d805b71c8fdcb315e9903862d0cbfec92e.tar.gz

  openbsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 86bd3e42c92b8c7bd7a789ba9b5da34cdd6744c8
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-86bd3e42c92b8c7bd7a789ba9b5da34cdd6744c8-{{checksum ".buildcache/cache-keys/package-86bd3e42c92b8c7bd7a789ba9b5da34cdd6744c8"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_c407_{{checksum ".buildcache/cache-keys/copy-source-c407468d8a2d3372007f0854b5f7aa142484f73f"}}
          - cache001-warm-go-build-vendor-cache_f3eb_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-f3eb0e446e517505d44a4dc41bdaa5afc37f9927"}}
          - cache001-build-static-assets_7c21_{{checksum ".buildcache/cache-keys/build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7"}}
          - cache001-build-ui_5fcd_{{checksum ".buildcache/cache-keys/build-ui-5fcd74915b08869b856272d3387411d1261f469e"}}
          - cache001-ui-dependencies_7c1e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c1e694ad5c5ec290f4b684b27b53e94b5e6508b"}}
          - cache001-install-yarn_985d_{{checksum ".buildcache/cache-keys/install-yarn-985d5d3f752a45cd0810fe7307419d816b3ffe09"}}
          - cache001-set-workdir_fe53_{{checksum ".buildcache/cache-keys/set-workdir-fe5358938453e5f6f63543c5ae1835424c7b8cbe"}}
          - cache001-install-go-tools_c2aa_{{checksum ".buildcache/cache-keys/install-go-tools-c2aad8477b1bc51dcb25518de1a7c6402dc3941f"}}
          - cache001-install-go_597a_{{checksum ".buildcache/cache-keys/install-go-597a1a15bf2e74b06883d2b2bb2e7239cb9b9c64"}}
          - cache001-base_1a0e_{{checksum ".buildcache/cache-keys/base-1a0eebdb7c8e017a66a042afd9f319a57d761a4c"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages/store
      # Save package cache.
      - save_cache:
          key: 'cache001-package-86bd3e42c92b8c7bd7a789ba9b5da34cdd6744c8-{{checksum ".buildcache/cache-keys/package-86bd3e42c92b8c7bd7a789ba9b5da34cdd6744c8"}}'
          paths:
            - .buildcache/packages/store
      - store_artifacts:
          path: .buildcache/packages/store
          destination: packages
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-f3eb0e446e517505d44a4dc41bdaa5afc37f9927.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-f3eb0e446e517505d44a4dc41bdaa5afc37f9927-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_f3eb_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-f3eb0e446e517505d44a4dc41bdaa5afc37f9927"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-f3eb0e446e517505d44a4dc41bdaa5afc37f9927.tar.gz

  solaris_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 0bc07ddb7a29024cdd7e1d542558055a8f0a4f3f
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-0bc07ddb7a29024cdd7e1d542558055a8f0a4f3f-{{checksum ".buildcache/cache-keys/package-0bc07ddb7a29024cdd7e1d542558055a8f0a4f3f"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_f996_{{checksum ".buildcache/cache-keys/copy-source-f996a2732a6c1085f98ca073e548c35d4e49d383"}}
          - cache001-warm-go-build-vendor-cache_4941_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-4941033b883d2fed929c3f3a2b3abd43e75249c0"}}
          - cache001-build-static-assets_7c21_{{checksum ".buildcache/cache-keys/build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7"}}
          - cache001-build-ui_5fcd_{{checksum ".buildcache/cache-keys/build-ui-5fcd74915b08869b856272d3387411d1261f469e"}}
          - cache001-ui-dependencies_7c1e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c1e694ad5c5ec290f4b684b27b53e94b5e6508b"}}
          - cache001-install-yarn_985d_{{checksum ".buildcache/cache-keys/install-yarn-985d5d3f752a45cd0810fe7307419d816b3ffe09"}}
          - cache001-set-workdir_fe53_{{checksum ".buildcache/cache-keys/set-workdir-fe5358938453e5f6f63543c5ae1835424c7b8cbe"}}
          - cache001-install-go-tools_c2aa_{{checksum ".buildcache/cache-keys/install-go-tools-c2aad8477b1bc51dcb25518de1a7c6402dc3941f"}}
          - cache001-install-go_597a_{{checksum ".buildcache/cache-keys/install-go-597a1a15bf2e74b06883d2b2bb2e7239cb9b9c64"}}
          - cache001-base_1a0e_{{checksum ".buildcache/cache-keys/base-1a0eebdb7c8e017a66a042afd9f319a57d761a4c"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages/store
      # Save package cache.
      - save_cache:
          key: 'cache001-package-0bc07ddb7a29024cdd7e1d542558055a8f0a4f3f-{{checksum ".buildcache/cache-keys/package-0bc07ddb7a29024cdd7e1d542558055a8f0a4f3f"}}'
          paths:
            - .buildcache/packages/store
      - store_artifacts:
          path: .buildcache/packages/store
          destination: packages
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-4941033b883d2fed929c3f3a2b3abd43e75249c0.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-4941033b883d2fed929c3f3a2b3abd43e75249c0-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_4941_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-4941033b883d2fed929c3f3a2b3abd43e75249c0"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-4941033b883d2fed929c3f3a2b3abd43e75249c0.tar.gz

  windows_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: eb21034ef49d6c061e0c0e27afe77cc10256129b
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-eb21034ef49d6c061e0c0e27afe77cc10256129b-{{checksum ".buildcache/cache-keys/package-eb21034ef49d6c061e0c0e27afe77cc10256129b"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_8214_{{checksum ".buildcache/cache-keys/copy-source-8214166acaf73767767dd4981da1efef3f35bea9"}}
          - cache001-warm-go-build-vendor-cache_1da1_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-1da13aa79cf3ca9b34ff2e38e2176999b19bf960"}}
          - cache001-build-static-assets_7c21_{{checksum ".buildcache/cache-keys/build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7"}}
          - cache001-build-ui_5fcd_{{checksum ".buildcache/cache-keys/build-ui-5fcd74915b08869b856272d3387411d1261f469e"}}
          - cache001-ui-dependencies_7c1e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c1e694ad5c5ec290f4b684b27b53e94b5e6508b"}}
          - cache001-install-yarn_985d_{{checksum ".buildcache/cache-keys/install-yarn-985d5d3f752a45cd0810fe7307419d816b3ffe09"}}
          - cache001-set-workdir_fe53_{{checksum ".buildcache/cache-keys/set-workdir-fe5358938453e5f6f63543c5ae1835424c7b8cbe"}}
          - cache001-install-go-tools_c2aa_{{checksum ".buildcache/cache-keys/install-go-tools-c2aad8477b1bc51dcb25518de1a7c6402dc3941f"}}
          - cache001-install-go_597a_{{checksum ".buildcache/cache-keys/install-go-597a1a15bf2e74b06883d2b2bb2e7239cb9b9c64"}}
          - cache001-base_1a0e_{{checksum ".buildcache/cache-keys/base-1a0eebdb7c8e017a66a042afd9f319a57d761a4c"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages/store
      # Save package cache.
      - save_cache:
          key: 'cache001-package-eb21034ef49d6c061e0c0e27afe77cc10256129b-{{checksum ".buildcache/cache-keys/package-eb21034ef49d6c061e0c0e27afe77cc10256129b"}}'
          paths:
            - .buildcache/packages/store
      - store_artifacts:
          path: .buildcache/packages/store
          destination: packages
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-1da13aa79cf3ca9b34ff2e38e2176999b19bf960.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-1da13aa79cf3ca9b34ff2e38e2176999b19bf960-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_1da1_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-1da13aa79cf3ca9b34ff2e38e2176999b19bf960"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-1da13aa79cf3ca9b34ff2e38e2176999b19bf960.tar.gz

  windows_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 02b82831770d184148a9d6770661c4712bee2227
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-02b82831770d184148a9d6770661c4712bee2227-{{checksum ".buildcache/cache-keys/package-02b82831770d184148a9d6770661c4712bee2227"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_044c_{{checksum ".buildcache/cache-keys/copy-source-044c1ad12868e18fe02c3f29c946df079e95fa7f"}}
          - cache001-warm-go-build-vendor-cache_7906_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-79069e4640672e19084d4887a6f3eebe09d04519"}}
          - cache001-build-static-assets_7c21_{{checksum ".buildcache/cache-keys/build-static-assets-7c21467f4fca7255898d0c54159292ccfa87d6f7"}}
          - cache001-build-ui_5fcd_{{checksum ".buildcache/cache-keys/build-ui-5fcd74915b08869b856272d3387411d1261f469e"}}
          - cache001-ui-dependencies_7c1e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c1e694ad5c5ec290f4b684b27b53e94b5e6508b"}}
          - cache001-install-yarn_985d_{{checksum ".buildcache/cache-keys/install-yarn-985d5d3f752a45cd0810fe7307419d816b3ffe09"}}
          - cache001-set-workdir_fe53_{{checksum ".buildcache/cache-keys/set-workdir-fe5358938453e5f6f63543c5ae1835424c7b8cbe"}}
          - cache001-install-go-tools_c2aa_{{checksum ".buildcache/cache-keys/install-go-tools-c2aad8477b1bc51dcb25518de1a7c6402dc3941f"}}
          - cache001-install-go_597a_{{checksum ".buildcache/cache-keys/install-go-597a1a15bf2e74b06883d2b2bb2e7239cb9b9c64"}}
          - cache001-base_1a0e_{{checksum ".buildcache/cache-keys/base-1a0eebdb7c8e017a66a042afd9f319a57d761a4c"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages/store
      # Save package cache.
      - save_cache:
          key: 'cache001-package-02b82831770d184148a9d6770661c4712bee2227-{{checksum ".buildcache/cache-keys/package-02b82831770d184148a9d6770661c4712bee2227"}}'
          paths:
            - .buildcache/packages/store
      - store_artifacts:
          path: .buildcache/packages/store
          destination: packages
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-79069e4640672e19084d4887a6f3eebe09d04519.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-79069e4640672e19084d4887a6f3eebe09d04519-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_7906_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-79069e4640672e19084d4887a6f3eebe09d04519"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-79069e4640672e19084d4887a6f3eebe09d04519.tar.gz


  bundle-releases:
    executor: releaser
    steps:
      - checkout
      - write-all-package-cache-keys
      - load-darwin_386_package
      - load-darwin_amd64_package
      - load-freebsd_386_package
      - load-freebsd_amd64_package
      - load-freebsd_arm_package
      - load-linux_386_package
      - load-linux_amd64_package
      - load-linux_arm_package
      - load-linux_arm64_package
      - load-netbsd_386_package
      - load-netbsd_amd64_package
      - load-openbsd_386_package
      - load-openbsd_amd64_package
      - load-solaris_amd64_package
      - load-windows_386_package
      - load-windows_amd64_package
      - run: ls -lahR .buildcache/packages/store
      # Surface each zip as a separate artifact.
      - store_artifacts:
          path: .buildcache/packages/store
          destination: packages-build-591c89b0c14817023b0ea7a20c6d33eb26acd93f-530d593613063dd9
      # Surface a tarball of the whole package store as an artifact.
      - run: tar -czf packages-build-591c89b0c14817023b0ea7a20c6d33eb26acd93f-530d593613063dd9.tar.gz .buildcache/packages/store
      - store_artifacts:
          path: packages-build-591c89b0c14817023b0ea7a20c6d33eb26acd93f-530d593613063dd9.tar.gz
          destination: packages-build-591c89b0c14817023b0ea7a20c6d33eb26acd93f-530d593613063dd9.tar.gz
      # Surface a tarball of just the alias symlinks as an artifact.
      # This is used by downstream processes, it's not much use by itself.
      - run: tar -czf aliases-build-591c89b0c14817023b0ea7a20c6d33eb26acd93f-530d593613063dd9.tar.gz .buildcache/packages/by-alias
      - store_artifacts:
          path: aliases-build-591c89b0c14817023b0ea7a20c6d33eb26acd93f-530d593613063dd9.tar.gz
          destination: aliases-build-591c89b0c14817023b0ea7a20c6d33eb26acd93f-530d593613063dd9.tar.gz

commands:
  load-darwin_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-666cfaa5af6f8111905dbb2a2aa8ab8e83f0a9b3-{{checksum ".buildcache/cache-keys/package-666cfaa5af6f8111905dbb2a2aa8ab8e83f0a9b3"}}'
  
  load-darwin_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-af9337ac8507a5dd31b68df73ade7f31535dd6fd-{{checksum ".buildcache/cache-keys/package-af9337ac8507a5dd31b68df73ade7f31535dd6fd"}}'
  
  load-freebsd_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-2814a6e0b0c0376db7998d1a3b77ebf034dc96df-{{checksum ".buildcache/cache-keys/package-2814a6e0b0c0376db7998d1a3b77ebf034dc96df"}}'
  
  load-freebsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-f164924c55c64aa97e0305a70657d9dd4e6b19ee-{{checksum ".buildcache/cache-keys/package-f164924c55c64aa97e0305a70657d9dd4e6b19ee"}}'
  
  load-freebsd_arm_package:
    steps:
      - restore_cache:
          key: 'cache001-package-feecff2d5678aaed0e9cd1275063bff0172d95e6-{{checksum ".buildcache/cache-keys/package-feecff2d5678aaed0e9cd1275063bff0172d95e6"}}'
  
  load-linux_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-5f916cc2cd8a6ec34f2b45ef9c5aac13d16d4b30-{{checksum ".buildcache/cache-keys/package-5f916cc2cd8a6ec34f2b45ef9c5aac13d16d4b30"}}'
  
  load-linux_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-303fe5b44af20f8c75d52251ee7875081085f0f8-{{checksum ".buildcache/cache-keys/package-303fe5b44af20f8c75d52251ee7875081085f0f8"}}'
  
  load-linux_arm_package:
    steps:
      - restore_cache:
          key: 'cache001-package-6567d2eb2a0550c80192777fde580debcde9bf3c-{{checksum ".buildcache/cache-keys/package-6567d2eb2a0550c80192777fde580debcde9bf3c"}}'
  
  load-linux_arm64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-033d31ff6def120af617cda24f017e66a5857e1b-{{checksum ".buildcache/cache-keys/package-033d31ff6def120af617cda24f017e66a5857e1b"}}'
  
  load-netbsd_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-47ef16a326ba5942bd65d17f5ff83bf7adbc414d-{{checksum ".buildcache/cache-keys/package-47ef16a326ba5942bd65d17f5ff83bf7adbc414d"}}'
  
  load-netbsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-4af6733e6eb626d86509d11b4dc48c2b4c299b1a-{{checksum ".buildcache/cache-keys/package-4af6733e6eb626d86509d11b4dc48c2b4c299b1a"}}'
  
  load-openbsd_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-b919e6c18167320217b120217f6de43610e24af9-{{checksum ".buildcache/cache-keys/package-b919e6c18167320217b120217f6de43610e24af9"}}'
  
  load-openbsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-86bd3e42c92b8c7bd7a789ba9b5da34cdd6744c8-{{checksum ".buildcache/cache-keys/package-86bd3e42c92b8c7bd7a789ba9b5da34cdd6744c8"}}'
  
  load-solaris_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-0bc07ddb7a29024cdd7e1d542558055a8f0a4f3f-{{checksum ".buildcache/cache-keys/package-0bc07ddb7a29024cdd7e1d542558055a8f0a4f3f"}}'
  
  load-windows_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-eb21034ef49d6c061e0c0e27afe77cc10256129b-{{checksum ".buildcache/cache-keys/package-eb21034ef49d6c061e0c0e27afe77cc10256129b"}}'
  
  load-windows_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-02b82831770d184148a9d6770661c4712bee2227-{{checksum ".buildcache/cache-keys/package-02b82831770d184148a9d6770661c4712bee2227"}}'
  

  write-build-layer-cache-keys:
    steps:
      - run:
          name: Write builder layer cache keys
          command: make -C packages*.lock write-builder-cache-keys

  write-package-cache-key:
    steps:
      - run:
          name: Write package cache key
          command: make -C packages*.lock write-package-cache-key

  write-all-package-cache-keys:
    steps:
      - run:
          name: Write package cache key
          command: make -C packages*.lock write-all-package-cache-keys
